(library
 (name mebi_plugin) ; This is the name you will use in
                    ; Coq's `Declare ML Module`, and
                    ; the name of the main OCaml
                    ; module of your plugin.
 (public_name rocq-mebi.mebi) ; This makes the plugin
                              ; installable; recommended, must
                              ; match opam package name.
 (synopsis "MEBI Plugin (src)") ; Synopsis, used in META generation.
 (flags :standard -rectypes -w -27) ; Coq requires the `-rectypes`
                                    ; flag; CoqPP generated code
                                    ; requires to disable warning 27
                                    ; often.
                                    ; (foreign_stubs                     ; we link our plugin with a C
                                    ;  (language c)                      ; library! Optional, of course.
                                    ;  (names ce_get))
 (libraries ; OCaml Libraries we want to link
            ; with, your choice here.
  rocq-runtime.vernac ; Needed for vernac extend.
  rocq-runtime.plugins.ltac ; Needed for tactic extend.
  )
 (modules
  utils
  output_kind
  output_mode
  output_config
  logger
  rocq_utils
  rocq_convert
  ; logging
  ; debug
  mebi_enc
  mebi_setup
  mebi_constr
  mebi_theories
  model_info
  model_state
  model_label
  model_note
  model_transition
  model_transition_opt
  model_action
  model_edge
  model
  saturate_model
  algorithms
  mebi_tactics
  mebi_wrapper
  mebi_ind
  mebi_utils
  mebi_hypothesis
  mebi_proof
  ; rocq_debug
  ; params
  mebi_weak
  mebi_api
  mebi_help
  mebi_unification
  ; mebi_debug
  mebi_unify
  command
  ; examples
  ; g_mebi
  ))

; FIXME: for updating to rocq-9.1
; (rocq.pp ; This will let Dune know about Coq's .mlg grammar files.

(coq.pp ; This will let Dune know about Coq's .mlg grammar files.
 (modules g_mebi))

; (rule
;  (targets g_mebi.ml)
;  (deps
;   (:mlg g_mebi.mlg))
;  (action
;   (chdir
;    %{project_root}
;    (run rocq pp-mlg %{deps}))))

; (library
;  (name mebi_fsm)
;  (public_name rocq-mebi.mebi_fsm)
;  (modules utils fsm bisimilarity))

; (executable
;  (name tests)
;  (modules tests)
;  (libraries mebi_plugin mebi_fsm))

; (test
;  (name tests))

; (rule (target))
